<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" integrity="sha384-DyZ88mC6Up2uqS4h/KRgHuoeGwBcD4Ng9SiP4dIRy0EXTlnuz47vAwmeGwVChigm" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <title>Document</title>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<style>
    
#mylogin{
  margin-left:200px;
  font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;

  font-size:60px;
}
    .new1{
text-align: center;
      border-radius:8px;
      width: 500px;
      height:auto;
      margin-left:80px;
      height:400px;
      background-color:aliceblue;
      margin-top: 10px;
      border: solid;
    }
   .new2{
margin-top: 30px;

   }
   #email{
 margin-left: 100px;
 width: 300px;
 margin-top: 20px;
   }


   #password{
 margin-left: 100px;
 width: 300px;
 margin-top: 20px;
   }

   #info{
     margin-top: 20px;
   }

    @media only screen and (max-width: 500px) {
 
 .new1{
 
     height: 400px;
    width:320px;
    margin-left:10px;
 }
 .new2{
     margin-right: 40px;
 }
 #password{
   width: 230px;
   margin-left: 30px;
 }
 #email{
  width: 230px;

   margin-left: 30px;
 }
 #mylogin{
  margin-left:100px;
  font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;

  font-size:60px;
}

 }


</style>
<body>
  <%- include('../partials/heading.hbs') %>

    <div id="messagebody" style="display:none">
      <div class="alert alert-primary" id="message" role="alert"> </div>
      </div>
 
  
    <div class="new1">

      <h1 style="color: red;">Login</h1>


<div class="new2">
<!-- <form action="/login" method="POST"> -->
  <form  method="POST" id="myform">

  <% if(!data.username){ %> 
  <div class="form-group">
    <label for="exampleInputEmail1">Email</label>
    <input type="text" class="form-control" id="email" name="username" aria-describedby="emailHelp" placeholder="Enter your Username">
  </div>

  <div class="form-group">
    <label for="exampleInputPassword1">Password</label>
    <input type="password" class="form-control" id="password" name="password"placeholder="Enter your Password">
  </div>
  <div class="form-group">
    <input type="hidden" class="form-control" id="emailVerified" name="emailVerified"placeholder="Enter your Password">
  </div>
  
  <button type="submit" class="btn btn-primary" id="info">Submit</button>
</form>
<a href="/forgot-password">Forgot Password</a>
</div>
</div>

<% } else {%> 

<h1 style="color:red;font-style: italic;">You are logged in </h1>
  <% } %> 
<div class="quizenter">

</div>

<% if(typeof(username)!='undefined'){ %> 
  <div id="name"style="display:none"><%=username%> </div>
<% } %> 

  
  <% if(typeof(message)!='undefined'){ %> 
    <div id="newmessage"style="display:none"><%=message%> </div>
    
    <%}  %> 



    <script src="https://www.gstatic.com/firebasejs/5.0.4/firebase.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.0.4/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.0.4/firebase-auth.js"></script>
<script src="https://cdn.firebase.com/libs/firebaseui/3.0.0/firebaseui.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>
const firebaseConfig = {
    apiKey: "AIzaSyAZ9x_QbhCfY9aEsqxEiYhWtfIRNGl_qeo",
    authDomain: "mynewproject-ae49a.firebaseapp.com",
    projectId: "mynewproject-ae49a",
    storageBucket: "mynewproject-ae49a.appspot.com",
    messagingSenderId: "939005557600",
    appId: "1:939005557600:web:ee766070db4bd2dadfbc05",
    measurementId: "G-YFKTT151SN"
  };
  firebase.initializeApp(firebaseConfig);



$("#myform").on("submit",function(e){  

  e.preventDefault()
       var formData = {
     email:$("#email").val(),
     password:$("#password").val(),
   };



     
        $.ajax({
            url:"/login",
            method:"POST",
            data:formData,
            success:function(response){
alert(response.message)
if(response.status=="success"){
  document.getElementById("messagebody").style.display="block"
  document.getElementById("message").setAttribute('role','success')
              document.getElementById("message").innerText=response.message 
              setTimeout(() => {
  location.href="https://neweducationworld.onrender.com/"
}, "1000")  
              
}
else{
  document.getElementById("messagebody").style.display="block"
              document.getElementById("message").innerText=response.message
}
             
            }
        })

  //document.getElementById('myform').submit()
     //  }


    })

let f= document.getElementById("name").innerText
 if(typeof(f)!='undefined'){
   document.getElementById("myname").innerText=f
}
else{
  document.getElementById("myname").innerText="Anonymous"

 }

 let hj=""
 if(document.getElementById("newmessage")){
   hj=document.getElementById("newmessage").innerText

 }
let html=``
if(hj!=null){
 setTimeout(() => {
   html=``
   
   document.getElementById("messagebody").innerHTML=html
   
   
   }, 6000);
  }

//$(document).ready(function () {
    
  //  $("#myform1").on("submit",function(e){
 //e.preventDefault()
 // var uniquecode= $("#uniquecode").val()
 /// var password= $("#password").val()

 //alert("dfaga")
//
//$.ajax({
     //   type: "POST",
    //    url: '/login',
    //    data: {uniquecode:uniquecode,password:password},
    //    success: function(response)
     //   {
     //     alert(response.json)
// let html=""
// html+='<div>'
//   html+=`<img src=${response.image} alt="">`
//   html+=response.usercomment;

// html+='</div>'

// $("#usercomment").html(html)
            // user is logged in successfully in the back-end
            // let's redirect
        
            
       
        

    
   //    }
  // });
  // });
  // });
  
</script>
    
</body>
</html>