<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
    <script type="text/javascript">
        function disableBack() { window.history.forward(); }
        setTimeout("disableBack()", 0);
        window.onunload = function () { null };
    </script>
</head>

<style>
    #rat {
        opacity: 0;
    }

    .start_btn button {
        font-size: 25px;
        font-weight: 500;
        color: #007bff;
        padding: 15px 30px;

        border-radius: 5px;
        background: #fff;

    }




    .info_box {
        width: 540px;
        background: #fff;
        border-radius: 5px;

        opacity: 0;
        pointer-events: none;
        transition: all 0.3s ease;
    }

    .activeInf {
        opacity: 1;
        pointer-events: fill;
    }



    .quiz_box {
        margin-left: 50px;
        width: 6000px;
        background: #fff;
        border-radius: 5px;

        opacity: 0;


    }

    .activeQuiz {
        opacity: 1;
    }


    .result_box {
        opacity: 0;

    }

    .showresultbox {
        opacity: 1;
    }


    .activeResult {
        margin-top: 0px;
        margin-left: 0px;
        opacity: 1;
    }


    .quiz_box header .timer {
        margin-left: 40px;
        color: #004085;
        background: #cce5ff;
        border: 1px solid #b8daff;
        height: 45px;
        padding: 0 8px;
        border-radius: 5px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 145px;
    }

    section {
        display: inline-block;
        padding: 25px 30px 20px 30px;
        background: #fff;
    }

    section .que_text {
        font-size: 25px;
        font-weight: 600;
    }

    section .option_list {
        margin-top: 200px;
        padding: 20px 0px;
        display: block;
    }

    section .option_list .option {
        background: aliceblue;
        border: 1px solid #84c5fe;
        border-radius: 5px;
        padding: 8px 15px;
        font-size: 17px;
        margin-bottom: 15px;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: space-between;
    }

    section .option_list .option:last-child {
        margin-bottom: 0px;
    }

    section .option_list .option:hover {
        color: #004085;
        background: #cce5ff;
        border: 1px solid #b8daff;
    }



    section .option_list .option.incorrect {
        color: #721c24;
        background: #f8d7da;
        border: 1px solid #f5c6cb;
    }

    section .option_list .option.disabled {
        pointer-events: none;
    }

    section .option_list .option .icon {
        height: 26px;
        width: 26px;
        border: 2px solid transparent;
        border-radius: 50%;
        text-align: center;
        font-size: 13px;
        pointer-events: none;
        transition: all 0.3s ease;
        line-height: 24px;
    }

    .green {

        background-color: red;
        font-family: 'Courier New', Courier, monospace;
    }

    .red {
        font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
        background-color: rgb(49, 153, 63);
    }

    .option {
        width: 300px;
        height: 50px;
        border: 1px solid #84c5fe;
        border-radius: 5px;
        padding: 8px 15px;
        font-size: 17px;
        margin-bottom: 15px;
        cursor: pointer;
        transition: all 0.3s ease;

        align-items: center;
        justify-content: space-between;

    }

    .solution {
        width: 550px;
        background: #fff;
        border-radius: 5px;


    }

    .solution_btn {
        opacity: 0;
    }

    .ff {
        font-size: 25px;
        font-weight: 400;
        font-family: 'Courier New', Courier, monospace;
    }

    .showsolutionbtn {
        opacity: 1;
    }



    .ll {
        opacity: 1
    }

    .finishexam {
        opacity: 0;
    }

    .activatefinish {
        opacity: 1;
    }

    .button1 {
        opacity: 0;
    }

    .activatebutton1 {
        opacity: 1;
    }

    .fg {
        opacity: 0;
    }

    .Myreg {
        opacity: 0;

    }

    .Myage {
        opacity: 0;
    }

    .marks {
        opacity: 0;
    }

    .quiz {
        opacity: 0;
    }

    .activemarks {
        opacity: 1;

    }

    .activereg {
        opacity: 1;
    }

    .activequiz {
        opacity: 1;
    }

    .activeage {
        opacity: 1;
    }

    .button2 {
        opacity: 0;

    }

    .button3 {
        opacity: 0;

    }

    .activebutton2 {
        opacity: 1;
    }

    .activebutton3 {
        opacity: 1;
    }

    .solutions {
        height: auto;
    }

    .pallette1 {
        display: inline-block;
        margin-left: 900px;

        width: 200px;
        height: 400px;
        border: 2px solid black;
        position: absolute;
        overflow-y: scroll;

    }

    .pallette2 {
        display: inline-block;
        margin-left: 900px;

        width: 200px;
        height: 400px;
        border: 2px solid black;
        position: absolute;
        overflow-y: scroll;

    }

    .pallette3 {
        display: inline-block;
        margin-left: 900px;

        width: 200px;
        height: 400px;
        border: 2px solid black;
        position: absolute;
        overflow-y: scroll;
    }

    .pallette4 {
        display: inline-block;
        margin-left: 900px;

        width: 200px;
        height: 400px;
        border: 2px solid black;
        position: absolute;
        overflow-y: scroll;

    }

    #button5 {
        height: 50px;
        width: 150px;
    }

    #button6 {
        height: 50px;
        width: 100px;
    }

    #button7 {
        height: 50px;
        width: 100px;
    }

    #button8 {
        height: 50px;
        width: 100px;
    }



    #ty {
        margin-top: 15px;
        margin-left: 40px;
        height: 150px;
        width: 500px;
    }

    #passimg {
        height: 300px;
        width: 500px;
    }

    .myimgtag {
        margin-left: 80px;
        margin-top: 20px;
        height: 280px;
        width: 600px;
    }

    .myimgtag[src=""] {
        display: none;
    }

    .passimg[src=""] {
        display: none;
    }

    .hu {
        display: none;
    }
</style>

<body>








    <br>
    <br>

    <div id="mysections">

    </div>









    <div class="namequiz">{{mdata}}</div>


    <div class="mycontainer">
        <div class="pallette1">

        </div>
        <div class="pallette2">

        </div>
        <div class="pallette3">

        </div>
        <div class="pallette4">

        </div>
        <div class="quiz_box" id="myquiz" style="top:10px;left:10px;">
            <header>
                <div class="title">Awesome Quiz Application</div>
                <div class="timer">
                    <div class="time_left_txt">Time Left</div>
                    <div class="timer_sec">15</div>
                </div>
                <div class="time_line"></div>
            </header>
            <section id="mysect">

                <div class="passage" id="passage"></div>
                <img src="" alt="" class="passimg" id="passimg">
                <img src="" alt="" id="queimg">
                <div class="que_text bg-light border "style="length:400px;width:700px">
                    <!-- Here I've inserted question from JavaScript -->


                </div>
                <img src="" class="myimgtag" id="myimgtag" alt="">
        </div>
        <div class="option_list"style="margin-left:80px">
            <!-- Here I've inserted options from JavaScript -->
        </div>



        <div id="integerquestion" style="display:none">
            <label for="exampleInputEmail1">Your answer in integer</label><br>
            <input type="number" id="myintegerans" style="margin-left:100px;width:200px" aria-describedby="emailHelp"
                placeholder="Enter Answercode" name="answercode3">
        </div>
        </section>

        <!-- footer of Quiz Box -->
        <footer id="myfoot">
            <div class="total_que">
                <!-- Here I've inserted Question Count Number from JavaScript -->
            </div>
            <button class="next_btn">Next Que</button>
            <button class="prev_btn">prev Que</button>
            <button style="display:none" class="integer_btn">integer submit</button>
            <button class="clearans_btn">clear answers</button>
            <button class="submit_btn">submit</button>
        </footer>
    </div>
    </div>
    <br><br>
    <!-- Result Box -->
    <div class="result_box">
        <div class="icon">
            <i class="fas fa-crown"></i>
        </div>
        <div class="complete_text">You've completed the exam . Kindly submit your responses</div>
        <div class="score_text">
            <!-- Here I've inserted Score Result from JavaScript -->
        </div>
        <div class="buttons">
           <!--- <button class="restart">Replay Quiz</button>
            <button class="quit">Quit Quiz</button>-->
        </div>
    </div>

    <!--<button class="solution_btn">click to see solutions</button><br><br>-->
    <div class="solution"></div>

    <form action="/newquiz4result" method="POST" class="myform" id="myform" enctype="multipart/form-data">

        <input type="hidden" name="na" value={{table2}} id="quizname">
        <input type="hidden" name="registation" value={{reg}} id="regno"><br>
        <input type="text" readonly name="marks" id="marks"><br>

        <input type="hidden" name="studentname" value={{name2}} id="studentname"><br>
        <button type="submit" style="width:300px;height:40px" class="btn btn-primary">submit your responses</button>


    </form>




    <div id="rat">{{userd}}</div>
    <script>
        //console.log({{data}})


        let html = ""
        let myquestions = []
        //myquestions.size=8
        let nn = 0


        let p = 0
        let g = 0
        let Mydata;

        let tm = 0
        let rat = document.getElementById("rat").innerText
        console.log(rat)
        Mydata = JSON.parse(rat)
        // console.log(Mydata[0])
        //console.log(Mydata[1].option2)

        let option2 = []
        for (let i = 0; i < Mydata.length; i++) {
            option2.push(Mydata[i].option2)
        }
        console.log(option2)
        // const start_btn = document.querySelector(".start_btn button");
        //const info_box = document.querySelector(".info_box");
        //const exit_btn = info_box.querySelector(".quit");
        //const restart_btn = document.querySelector(".restart");


        const quiz_box = document.querySelector(".quiz_box");
        const integerans = document.getElementById("myintegerans");
        const integerquestion = document.getElementById("integerquestion");
        const namequiz = document.querySelector(".namequiz");
        const integerbtn = document.querySelector(".integer_btn");
        const result_box = document.querySelector(".result_box");
        const option_list = document.querySelector(".option_list");
        const time_line = document.querySelector("header .time_line");
        const timeText = document.querySelector(".timer .time_left_txt");
        const timeCount = document.querySelector(".timer .timer_sec");
        const solution = document.querySelector(".solution")
        const button1 = document.querySelector(".button1")
        const solution_btn = document.querySelector('.solution_btn')
        const prev_btn = document.querySelector(".prev_btn")
        const clear_btn = document.querySelector(".clearans_btn")
        const myage = document.querySelector(".Myage")
        const myreg = document.querySelector(".Myreg")
        const button2 = document.querySelector(".button2")
        const button3 = document.querySelector(".button3")
        // const imgtag = document.querySelector(".imgtag")
        const Myresult = document.querySelector(".Myresult")
        const submitbtn = document.querySelector(".submit_btn")
        const myresponses = document.querySelector(".myresponses")
        const pallette1 = document.querySelector(".pallette1")
        const pallette2 = document.querySelector(".pallette2")
        const pallette3 = document.querySelector(".pallette3")
        const pallette4 = document.querySelector(".pallette4")
        const button5 = document.getElementById('button5')
        const button6 = document.getElementById('button6')
        const button7 = document.getElementById('button7')
        const button8 = document.getElementById('button8')
        const myimgtag = document.querySelector(".myimgtag")
        const mypasstag = document.getElementById('passage')
        const mypassimg = document.getElementById('passimg')
        const quiz = document.querySelector(".quiz")
        let finishexam = document.querySelector('.finishexam')





        quiz_box.classList.add("activeQuiz");

        //info_box.classList.remove("activeInf");
        // showQuetions(0); //calling showQestions function
        // queCounter(1); //passing 1 parameter to queCounter
        //calling startTimer function

        // startTimerLine(0); //calling startTimerLine function
        //}
        namequiz.style.display = "none"
        let timeValue = 60;
        let que_count = 0;
        let que_numb = 1;
        // let userScore1 = 0;
        let counter;
        let counterLine;
        let widthValue = 0;

        let html1 = ``
        let no1 = parseInt(Mydata[0].qsection, 10)

        function section1() {
            for (let i = 0; i <= Mydata[0].qsection - 1; i++) {
                html1 += `<input type="submit" value=${i + 1} id=${i} class="pots" onclick="return changed(this.id)" style="height:40px;width:40px;">`

            }
            pallette1.innerHTML = html1


        }

        section1()
        let no2 = no1;
        let no3 = no1;
        let no4 = no1;
        if (Mydata[no1]) {

            let no2 = parseInt(Mydata[no1].qsection, 10)

        }


        if (Mydata[no2 + no1]) {
            let no3 = parseInt(Mydata[no2 + no1].qsection, 10)
        }

        if (Mydata[no1 + no2 + no3]) {

            let no4 = parseInt(Mydata[no2 + no1 + no3].qsection, 10)
        }





        let html2 = ``

        function section2() {
            if (Mydata[no1]) {


                for (let i = no1; i <= (no1 + no2) - 1; i++) {
                    html2 += `<input type="submit" value=${i + 1} id=${i} class="pots" onclick="return changed(this.id)" style="height:40px;width:40px;">`

                }


            }
            else {
                html2 = "";
            }


            pallette2.innerHTML = html2

        }


        section2()





        let html3 = ``

        function section3() {
            if (Mydata[no2 + no1]) {


                for (let i = (no1 + no2); i <= (no1 + no2 + no3) - 1; i++) {
                    html3 += `<input type="submit" value=${i + 1} id=${i} class="pots" onclick="return changed(this.id)" style="height:40px;width:40px;">`

                }

            }
            else {

                html3 = ""
            }


            pallette3.innerHTML = html3

            //
        }





        section3()



        let html4 = ``

        function section4() {
            if (Mydata[no1 + no2 + no3]) {

                for (let i = (no1 + no2 + no3); i <= (no1 + no2 + no3 + no4) - 1; i++) {
                    html4 += `<input type="submit" value=${i + 1} id=${i} class="pots" onclick="return changed(this.id)" style="height:40px;width:40px;">`

                }


            }

            else {

                html4 = ""
            }
            pallette4.innerHTML = html4


        }


        section4()




        // console.log("changed")
        // let h=document.querySelector(".pots").value

        //localStorage.setItem("gh",kk)
        //console.log(kk)
        //showQuetions(kk)

        //const hg=document.querySelectorAll(".pots")
        //for(let i=0;i<5;i++){
        // hg.onclick=()=>{
        //   // let s=localStorage.setItem('gh',hg.value)

        //}


        //}
        //s=localStorage.getItem('gh')
        //if(s==null){
        //   que_count=0
        // }
        // // else{
        /// que_count=s
        // }
        //let que_count=localStorage.getItem("gh")
        //let que_count=localStorage.getItem("gh")

        //console.log(que_count)


        //if (performance.navigation.type != performance.navigation.TYPE_RELOAD) {

        const next_btn = document.querySelector("footer .next_btn");
        const bottom_ques_counter = document.querySelector("footer .total_que");
        //showQuetions(localStorage.getItem("gh"))


        changed(0)

        function changed(kk) {
            showQuetions(0)

            document.getElementById('myform').style.display = "none"
            que_count = kk

            let html = ``;
            if (Mydata[0].sections) {
                html = ` <button id="button5"   name="button1"  style="height:30px;width:100px;" onclick="changed(0)">${Mydata[0].sections}</button>

              
`
            }

            if (typeof (Mydata[no1]) != 'undefined') {
                // if ((Mydata[1].sections) && (no1)) {
                html += `<button id="button6"  name="button1" style="height:30px;width:100px;" onclick="changed(${no1 + 1})">${Mydata[no1].sections}</button>`

                ///  }
            }


            if (typeof (Mydata[no2 + no1]) != 'undefined') {
                // if ((Mydata[2].sections) && (no2)) {
                html += `<button id="button7"  name="button2" style="height:30px;width:100px;"onclick="changed(${no1 + no2 + 1})">${Mydata[no2 + no1].sections}</button>`

                //  }
            }

            if (typeof (Mydata[no3 + no1 + no2]) != 'undefined') {
                // if ((Mydata[3].sections) && (no3)) {
                html += `<button id="button8"  name="button3" style="height:30px;width:100px;"onclick="changed(${no1 + no2 + no3 + 1})">${Mydata[no3 + no1 + no2].sections}</button>`

                // }
            }

            const button5 = document.getElementById('button5')
            const button6 = document.getElementById('button6')
            const button7 = document.getElementById('button7')
            const button8 = document.getElementById('button8')


            document.getElementById("mysections").innerHTML = html






            function showpallet() {

                if (que_count >= 0 && que_count <= no1 - 1) {
                    pallette2.style.display = "none"
                    pallette3.style.display = "none"
                    pallette1.style.display = "block"
                    pallette4.style.display = "none"

                }

                if (que_count >= no1 && que_count <= (no1 + no2) - 1) {
                    pallette2.style.display = "block"
                    pallette1.style.display = "none"
                    pallette3.style.display = "none"
                    pallette4.style.display = "none"
                }
                if (que_count >= (no1 + no2) && que_count <= (no1 + no2 + no3) - 1) {
                    pallette3.style.display = "block"
                    pallette2.style.display = "none"
                    pallette1.style.display = "none"
                    pallette4.style.display = "none"
                }
                if (que_count >= no1 + no2 + no3 + 1 && que_count <= (no1 + no2 + no3 + no4) - 1) {
                    pallette4.style.display = "block"
                    pallette2.style.display = "none"
                    pallette1.style.display = "none"
                    pallette3.style.display = "none"
                }

            }
            showpallet()
            showQuetions(que_count)
            next_btn.onclick = () => {
                let a = []
                let myanswers = JSON.parse(localStorage.getItem("myquestions"))

                if (que_count < Mydata.length - 1) {
                    //if question count is less than total question length

                    que_numb = que_count + 1
                    que_count++; //increment the que_count value
                    que_numb++; //increment the que_numb value
                    showQuetions(que_count); //calling showQestions function
                    queCounter(que_numb); //passing que_numb value to queCounter
                    g = myanswers[que_numb - 1]
                    const option = option_list.children[0].querySelectorAll(".option");
                    showpallet()
                    console.log("Srfgswgs2")

                    if (Array.isArray(myanswers[que_count])) {


                        for (let i = 0; i < myanswers[que_count].length; i++) {

                            a.push(myanswers[que_count][i]);
                            option[a[i]].classList.add('green')
                            console.log("dfgdsg3")

                        }
                    }
                    else {

                        console.log(que_count)


                        console.log(option[g])

                        if (option[g]) {
                            option[g].classList.add('green')

                        }

                    }
                    timeText.textContent = "Time Left"; //change the timeText to Time Left

                    next_btn.classList.remove("show"); //hide the next button

                } else {

                    que_numb = 1
                    que_count = 0
                    showQuetions(que_count); //calling showQestions function
                    queCounter(que_numb); //p

                }
            }


            prev_btn.onclick = () => {
                let myanswers = JSON.parse(localStorage.getItem("myquestions"))
                let b = [];

                if (que_count < Mydata.length) {

                    que_numb = que_count + 1
                    que_count--; //increment the que_count value
                    que_numb--; //increment the que_numb value



                    if (que_numb < 0) {

                        que_count = Mydata.length - 1;
                        que_numb = Mydata.length
                        console.log(Mydata.length)


                    }

                    showpallet()
                    //
                    showQuetions(que_count); //calling showQestions function

                    queCounter(que_numb);
                    g = myanswers[que_numb - 1]
                    const option = option_list.children[0].querySelectorAll(".option");
                    //

                    if (Array.isArray(myanswers[que_count])) {
                        // if (myanswers[que_count].length>1) {

                        for (let i = 0; i < myanswers[que_count].length; i++) {

                            b.push(myanswers[que_count][i]);
                            option[b[i]].classList.add('green')

                        }

                    }
                    else {
                        console.log(que_count)

                        if (option[g]) {
                            option[g].classList.add('green')

                        }



                    }
                }



            }


            clear_btn.onclick = () => {
                const index = myquestions.indexOf(que_count);

                myquestions.splice(index - 1, 1)
                console.log(myquestions)
                let b = JSON.stringify(myquestions)
                localStorage.setItem("myquestions", b)

            }


            submitbtn.onclick = () => {

                clearInterval(counter)
                showResult()
                document.getElementById('myform').style.display = "block"
                document.getElementById('mysect').style.display = "none"
                document.getElementById('myfoot').style.display = "none"
                document.getElementById('myquiz').style.display = "none"
                document.getElementById("mysections").style.display = "none"
                option_list.style.display = "none"
                integerquestion.style.display = 'none'
                integerbtn.style.display = "none"

                //localStorage.removeItem('storagekey');
            }


//----------------------------------------------------------------------------------------------------
           // solution_btn.onclick = () => {
               // solution.innerHTML = html


             //   let i = 0;
             ///   let j = 0
              //  const option = solution.querySelectorAll(".optiongr");
             //   console.log(option)
             //   for (j = 0; j < Mydata.length; j++) {
                 //   for (i = 0; i < 4; i++) {


//
                 //       if (myquestions[j] == i) {

                     //       console.log("mavhed")
                            // console.log(option[i])
                     //       option[j].children[i].classList.add('green')
                            //console.log(option[i].children.innerText)
                     //   }
                 //       if (Mydata[j].answercode == i) {
                     //       option[j].children[i].classList.add('red')
                //        }

                //    }

            //    }
            //    Myresult.value = mm + html
            //    console.log(Myresult.value)
                // textarea = document.querySelector(".solutions");
                ///textarea.addEventListener('input', autoResize, false);

                // function autoResize() {
                // this.style.height = 'auto';
                //this.style.height = this.scrollHeight + 'px';
                //}


           // }
//--------------------------------------------------------------------------------------------------
            // getting questions and options from array
            function showQuetions(que_count) {
                let que_tag = ""
                const que_text = document.querySelector(".que_text");
                console.log(que_count)

                if ((Mydata[que_count].type == "multichoice") || (Mydata[que_count].type == "multi")) {
                    integerbtn.style.display = "none"
                    let img_tag = ""

                    let pass_img = ""
                    let pass_tag = ""
                    if (Mydata[que_count].queimg) {
                        que_tag = '<span class="ff">' + Mydata[que_count].numb + ". " + `<img src="${Mydata[que_count].queimg}" id="ty"  alt="" >` + '</span>' + '<br>'

                        //console.log("fdagagagagrfasgrregaergaergfa")
                    }
                    else {
                        que_tag = '<span class="ff">' + Mydata[que_count].numb + ". " + Mydata[que_count].question + '</span>' + '<br>'

                        // que_text.innerHTML = que_tag; 
                        //console.log("dsasgagrfagrfafdsgrgfarfgafr")

                    }
                    //creating a new span and div tag for question and option and passing the value using array index


                    // let que_tag = '<span class="ff">' + Mydata[que_count].numb + ". " + Mydata[que_count].question + '</span>' + '<br>'
                    if (Mydata[que_count].myfiles != null) {
                        img_tag = Mydata[que_count].myfiles;

                    } else {
                        img_tag = ""
                        // document.getElementById('ty2').style.display="none"             
                    }

                    if (Mydata[que_count].passageimg != null) {


                        //if(Mydata[que_count].passageimg){
                        //console.log("passage image is there")
                        pass_img = Mydata[que_count].passageimg;
                        // mypassimg.innerHTML=pass_img
                    } else {
                        pass_img = ""
                    }



                    if (Mydata[que_count].passage != null) {

                        pass_tag = `<textarea readonly class="form-control" id="pass" style="width:500px;overflow-y:scroll;height:auto;margin:auto">${Mydata[que_count].passage}</textarea>`;


                    } else {
                        pass_tag = ""
                    }

                    console.log(img_tag)
                    console.log(pass_img)
                    console.log(pass_tag)











                    que_text.innerHTML = que_tag



                    if (img_tag == null) {

                        console.log("running 11")
                        //document.getElementById('myimgtag').removeAttribute('src');
                        myimgtag.setAttribute("src", img_tag)


                    }

                    else {
                        console.log("running22")
                        console.log(myimgtag)
                        myimgtag.setAttribute("src", img_tag)
                        console.log(img_tag)
                    }


                    if (pass_img == null) {
                        // mypassimg.style.display="none"
                        mypassimg.setAttribute("src", pass_img)

                    } else {
                        console.log("there is an passage image")
                        console.log(mypassimg)
                        mypassimg.setAttribute("src", pass_img)
                    }

                    if (pass_tag != "") {
                        mypasstag.innerHTML = pass_tag;
                    }
                    else {
                        console.log(pass_tag)
                        mypasstag.classList.add('hu')
                    }

                    let option_tag = `<div class="optiongr">
                 
        <div class="option" id=0>${Mydata[que_count].option1} </div>
    <div class="option" id=1>${Mydata[que_count].option2} </div>
    <div class="option" id=2>${Mydata[que_count].option3} </div>
    <div class="option" id=3> ${Mydata[que_count].option4} +'</div>
   
    </div>`;
                    //adding new span tag inside que_tag

                    option_list.style.display = "block"
                    integerquestion.style.display = 'none'
                    option_list.innerHTML = option_tag; //adding new div tag inside option_tag 
                    const option = option_list.children[0].querySelectorAll(".option");
                    console.log(option)

                    let obj = {}

                    if ((Mydata[que_count].type == "multi")) {
                        let h = []
                        for (let i = 0; i < 4; i++) {

                            option[i].onclick = () => {
                                h.push(option[i].getAttribute('id'))

                                option[i].classList.add("green")


                                myquestions[que_count] = h

                            }

                        }



                    }


                    else {




                        for (let i = 0; i < 4; i++) {
                            option[i].onclick = () => {

                                myquestions[que_count] = (option[i].getAttribute('id'))


                                for (let j = 0; j < 4; j++) {
                                    if (myquestions[que_count] == option[j].getAttribute('id')) {
                                        option[j].classList.add("green")
                                    }
                                    if (myquestions[que_count] != option[j].getAttribute('id')) {
                                        option[j].classList.remove("green")
                                    }

                                }


                                console.log(myquestions)
                                //console.log(questions[index].answercode)

                            }
                            //  console.log(Mydata[que_count].myfiles)
                        }
                        // result()
                        // console.log(Mydata[que_count].myfiles)
                    }
                    localStorage.setItem("myquestions", JSON.stringify(myquestions))

                }



                /// let tickIconTag = '<div class="icon tick"><i class="fas fa-check"></i></div>';
                /// let crossIconTag = '<div class="icon cross"><i class="fas fa-times"></i></div>';


                // return true;

                if (Mydata[que_count].type == "integertype") {
                    option_list.style.display = "none"
                    integerquestion.style.display = 'block'
                    integerbtn.style.display = "block"
                    que_tag = '<span class="ff">' + Mydata[que_count].numb + ". " + Mydata[que_count].question + '</span>' + '<br>'

                    // option_list.innerHTML = option_tag;
                    que_text.innerHTML = que_tag
                    integerbtn.onclick = () => {
                        console.log(integerans.value)
                        myquestions[que_count] = integerans.value
                        localStorage.setItem("myquestions", JSON.stringify(myquestions))
                        console.log(myquestions)
                    }










                }


            }



        }



        function showResult() {
            result()
            console.log("this is result box")

            //info_box.classList.remove("activeInf"); //hide info box
            quiz_box.style.display = 'none'; //hide quiz box
            result_box.classList.add("activeResult"); //show result box

            for (let i = 0; i < Mydata.length; i++) {

                let que_tag = '<span class="ff">' + Mydata[i].numb + ". " + Mydata[i].question + '</span>';


                let img_tag = `<img.src="${Mydata[i].myfiles}" alt="" >`
                let option_tag = `<div class="optiongr">
                   
        <div class="option" id=0>${Mydata[i].option1} </div>
    <div class="option" id=1>${Mydata[i].option2} </div>
    <div class="option" id=2>${Mydata[i].option3} </div>
    <div class="option" id=3> ${Mydata[i].option4} </div>
     
    <textarea class="solutions" style="height:400px;width:500px;"><span> ${Mydata[i].solutions}<span> </textarea>
    </div>`;

                html += que_tag + `<br>` + img_tag + `<br>` + option_tag + `<br>`


            }

            const scoreText = result_box.querySelector(".score_text");


            //  }
        }

        //-------------------------------------------------scoretext-------------------------------------------
        //const options = document.querySelector(".option_list");

        function result() {

            let my = JSON.parse(localStorage.getItem("myquestions"))
            console.log(myquestions)
            let m = 0
            let pp = 0
            for (let i = 0; i < Mydata.length; i++) {
                let a = []
                let b = []
                let l = 0
                let ll = [];

                if (Mydata[i].type == "multi") {
                    if (JSON.parse(Mydata[i].answercode)['answer1'] != '') {
                        b.push(JSON.parse(Mydata[i].answercode)['answer1'])

                        // options[i].children[JSON.parse(Mydata[i].answercode)['answer1']].style.backgroundColor="green"
                    }
                    if (JSON.parse(Mydata[i].answercode)['answer2'] != '') {
                        b.push(JSON.parse(Mydata[i].answercode)['answer2'])
                        //options[i].children[JSON.parse(Mydata[i].answercode)['answer2']].style.backgroundColor="green"
                    }
                    if (JSON.parse(Mydata[i].answercode)['answer3'] != '') {
                        b.push(JSON.parse(Mydata[i].answercode)['answer3'])
                        //options[i].children[JSON.parse(Mydata[i].answercode)['answer3']].style.backgroundColor="green"

                    }

                    if (myquestions[i]) {
                        for (let j = 0; j < myquestions[i].length; j++) {
                            //console.log(myquestions[i])
                            ll = myquestions[i]
                            a.push(ll[j])

                        }

                        //options[i].children[JSON.parse(Object.values(Mydata[i])[h])['answer1']].style.backgroundColor="red"

                    }



                    for (let t = 0; t < b.length; t++) {

                        for (let j = 0; j < a.length; j++) {
                            if (b[t] == a[j]) {
                                l = l + 1
                            }
                        }

                        if (l == b.length) {
                            // console.log(l)
                            //console.log(myquestions)
                            console.log("they are qual")

                            if (Mydata[i].positivemarks != 'undefined') {
                                nn = nn + Mydata[i].positivemarks

                            }
                            else {

                                //
                            }
                        } else {
                            if (Mydata[i].negativemarks != 'undefined') {
                                nn = nn - Mydata[i].negativemarks != 'undefined'
                            }
                        }
                    }

                    console.log(nn)

                    console.log(a)
                    console.log(b)


                }

                if (Mydata[i].type == "integertype") {
                    console.log("Integer evaluation is beggining")
                    if (myquestions[i] == Mydata[i].integerans) {


                        if (typeof (Mydata[i].positivemarks) != 'undefined') {
                            console.log("Integer evaluation is running")


                            pp = pp + Mydata[i].positivemarks;
                            m = m + pp
                            /// localStorage.setItem('integerscore',pp)
                        }
                        else {
                            //
                        }



                    } else {

                        if (typeof (Mydata[i].negativemarks) != 'undefined') {
                            m = m - Mydata[i].negativemarks
                        }

                    }
                }

                if (Mydata[i].type == "multichoice") {
                    //for(let j=0;j<myquestions.length;j++){

                    // if(JSON.parse(Mydata[i].answercode)['answer1']==j){

                    // console.log(JSON.parse(Mydata[i].answercode)['answer1'])
                    // if(options[i]){

                    // options[i].children[JSON.parse(Mydata[i].answercode)['answer1']].style.backgroundColor="green"
                    //}
                    // }
                    // console.log(Object.values(Mydata[i])[h])

                    // if(Object.values(Mydata[i])[h]!=null){
                    ///if(Object.values(Mydata[i])[h][0]==j){
                    // console.log(JSON.parse(Object.values(Mydata[i])[h])[0])
                    // options[i].children[j].style.backgroundColor="red"
                    //}

                    //}

                    //}
                    if (myquestions[i] != null) {
                        if (myquestions[i] == JSON.parse(Mydata[i].answercode)['answer1']) {
                            console.log("runhgjg")

                            if (typeof (Mydata[i].positivemarks) != 'undefined') {

                                m = m + Mydata[i].positivemarks;

                                //-----------------------------------------
                                //commented out for e
                            }
                            else {
                                //
                            }
                            //
                            //----------------------------------------------
                            //tm=m+nn   

                            //console.log(Object.values(Mydata[i])[h][0])
                            //console.log(JSON.parse(Mydata[i].answercode)['answer1'])
                        } else {
                            if (typeof (Mydata[i].negativemarks) != 'undefined') {
                                m = m - Mydata[i].negativemarks
                            }


                        }
                        //}     

                    }
                    console.log(pp)
                    //let jm=localStorage.getItem('integerscore')
                    tm = m + nn + pp

                   
                }

                //end of muliplechoice if ---

            }
            fs=tm+pp
             document.getElementById('marks').value = fs
            console.log("yoiuru kshdflkjashlrhyour score is" + fs)
        }


        ///this isi the doubtful bracket kindly refer it again
        //-------------------------------------------------------------------------------------------------------



        // if (myquestions[i] == actualans.answer1) {
        //console.log("matched")
        //  userScore1 = userScore1 + 1




        // document.getElementById("myform").innerHTML = ``


        //             for (let i = 0; i < myquestions.length; i++) {
        //                 document.getElementById("myform").innerHTML += `<input type="number" name=Myname value=${myquestions[i]}><br>
        // `

        //             }
        // document.getElementById("myform").innerHTML += `<input type="text" name=na value={{table2}}>`
        // document.getElementById("myform").innerHTML += `<input type="number" name=registation value={{reg}}>`
        // document.getElementById("myform").innerHTML += `<input type="number" name=marks value=${userScore1}>`
        // document.getElementById("myform").innerHTML += `<input type="text" name=studentname value={{name2}}>`
        // document.getElementById("myform").submit()
        //-------------------------------using ajax to send myquestions to server------------------------------

        $(document).ready(function () {

            $("#myform").on("submit", function (e) {
                e.preventDefault()
                var studentname = $("#studentname").val()
                var quizname = $("#quizname").val()
                var regno = $("#regno").val()
                var marks = $("#marks").val()
                var responses = myquestions
                console.log(tm)
                alert("submitting")

                $.ajax({
                    type: "POST",
                    url: '/newquiz4result',
                    data: { studentname: studentname, quizname: quizname, regno: regno, responses: JSON.stringify(myquestions), marks: marks },
                    success: function (response) {

                        alert(response.message)

                    }
                });
                //return false;

            });
        });

        // document.getElementById("myform").submit()












        //-------------------------------------------------------------------------------------------------------



        ///////////// }

        //let marks1=document.querySelector(".marks")
        //myreg.classList.add("activereg")
        //marks1.classList.add("activemarks")
        //myage.classList.add("activeage")
        //quiz.classList.add("activequiz")

        //quizna.value={{quizname}}
        //myreg.value={{reg}}
        //myage.value={{student}}
        //marks1.value=userScore1
        //console.log(userScore1)
        //console.log(marks1.value)

        // solution_btn.classList.add("showsolutionbtn")
        //button1.classList.add("activatebutton1")
        //button2.classList.add("activebutton2")
        ///button3.classList.add("activebutton3")
        // }








        let count;
        let b = localStorage.getItem('storagekey')
        console.log(b)
        if (b == null) {
            count = Mydata[1].time
            //console.log("restart")
        }
        else {
            count = b

        }
        startTimer(count);


        document.addEventListener("visibilitychange", function () {
            document.title = document.visibilityState;
            if (document.title == 'hidden') {
                clearInterval(counter)


                showResult()

            }


        })


        function startTimer(count) {
            counter = setInterval(timer, 1000);
            function timer() {

                //window.addEventListener("beforeunload", function (e) {
                //var confirmationMessage = "\o/";

                //(e || window.event).returnValue = confirmationMessage; //Gecko + IE
                //return confirmationMessage;                            //Webkit, Safari, Chrome
                //});
                  const sec = parseInt(count, 10);
                 let hours   = Math.floor(count / 3600); // get hours
                  let minutes = Math.floor((count - (hours * 3600)) / 60); // get minutes
                let seconds = sec - (hours * 3600) - (minutes * 60); 
                timeCount.textContent = hours +":"+minutes +":"+seconds; //changing the value of timeCount with time value
                count--; //decrement the time value
                localStorage.setItem('storagekey', count)
                count = localStorage.getItem('storagekey')
                if (count < 9) { //if timer is less than 9
                    let addZero = timeCount.textContent;
                    timeCount.textContent = "0" + addZero; //add a 0 before time value
                }
                if (count < 0) { //if timer is less than 0
                    clearInterval(counter); //clear counter
                    timeText.textContent = "Time Off"; //change the time text to time off
                                    localStorage.removeItem('storagekey');

                    
                    document.getElementById('myform').style.display = "block"
                    document.getElementById('mysect').style.display = "none"
                    document.getElementById('myfoot').style.display = "none"
                    document.getElementById('myquiz').style.display = "none"
                    document.getElementById("mysections").style.display = "none"
                    option_list.style.display = "none"

                    showResult()
                    solution_btn.classList.add("showsolutionbtn")
                    next_btn.classList.add("show"); //show the next button if user selected any option


                }
            }
        }

        //startTimer(10);


        function queCounter(index) {
            //creating a new span tag and passing the question number and total question
            let totalQueCounTag = '<span><p>' + index + '</p> of <p>' + Mydata.length + '</p> Questions</span>';
            bottom_ques_counter.innerHTML = totalQueCounTag;  //adding new span tag inside bottom_ques_counter
        }

//console.log(html)


    </script>
</body>

</html>